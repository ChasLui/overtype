{
  "version": 3,
  "sources": ["../src/parser.js", "../src/shortcuts.js", "../src/themes.js", "../src/styles.js", "../src/icons.js", "../src/toolbar.js", "../src/overtype.js"],
  "sourcesContent": ["/**\n * MarkdownParser - Parses markdown into HTML while preserving character alignment\n * \n * Key principles:\n * - Every character must occupy the exact same position as in the textarea\n * - No font-size changes, no padding/margin on inline elements\n * - Markdown tokens remain visible but styled\n */\nexport class MarkdownParser {\n  /**\n   * Escape HTML special characters\n   * @param {string} text - Raw text to escape\n   * @returns {string} Escaped HTML-safe text\n   */\n  static escapeHtml(text) {\n    const map = {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      \"'\": '&#39;'\n    };\n    return text.replace(/[&<>\"']/g, m => map[m]);\n  }\n\n  /**\n   * Preserve leading spaces as non-breaking spaces\n   * @param {string} html - HTML string\n   * @param {string} originalLine - Original line with spaces\n   * @returns {string} HTML with preserved indentation\n   */\n  static preserveIndentation(html, originalLine) {\n    const leadingSpaces = originalLine.match(/^(\\s*)/)[1];\n    const indentation = leadingSpaces.replace(/ /g, '&nbsp;');\n    return html.replace(/^\\s*/, indentation);\n  }\n\n  /**\n   * Parse headers (h1-h3 only)\n   * @param {string} html - HTML line to parse\n   * @returns {string} Parsed HTML with header styling\n   */\n  static parseHeader(html) {\n    return html.replace(/^(#{1,3})\\s(.+)$/, (match, hashes, content) => {\n      const level = hashes.length;\n      const levelClasses = ['h1', 'h2', 'h3'];\n      return `<span class=\"header ${levelClasses[level-1]}\"><span class=\"syntax-marker\">${hashes}</span> ${content}</span>`;\n    });\n  }\n\n  /**\n   * Parse horizontal rules\n   * @param {string} html - HTML line to parse\n   * @returns {string|null} Parsed horizontal rule or null\n   */\n  static parseHorizontalRule(html) {\n    if (html.match(/^(-{3,}|\\*{3,}|_{3,})$/)) {\n      return `<div><span class=\"hr-marker\">${html}</span></div>`;\n    }\n    return null;\n  }\n\n  /**\n   * Parse blockquotes\n   * @param {string} html - HTML line to parse\n   * @returns {string} Parsed blockquote\n   */\n  static parseBlockquote(html) {\n    return html.replace(/^&gt; (.+)$/, (match, content) => {\n      return `<span class=\"blockquote\"><span class=\"syntax-marker\">&gt;</span> ${content}</span>`;\n    });\n  }\n\n  /**\n   * Parse bullet lists\n   * @param {string} html - HTML line to parse\n   * @returns {string} Parsed bullet list item\n   */\n  static parseBulletList(html) {\n    return html.replace(/^((?:&nbsp;)*)([-*])\\s(.+)$/, (match, indent, marker, content) => {\n      return `${indent}<span class=\"syntax-marker\">${marker}</span> ${content}`;\n    });\n  }\n\n  /**\n   * Parse numbered lists\n   * @param {string} html - HTML line to parse\n   * @returns {string} Parsed numbered list item\n   */\n  static parseNumberedList(html) {\n    return html.replace(/^((?:&nbsp;)*)(\\d+\\.)\\s(.+)$/, (match, indent, marker, content) => {\n      return `${indent}<span class=\"syntax-marker\">${marker}</span> ${content}`;\n    });\n  }\n\n  /**\n   * Parse code blocks (markers only)\n   * @param {string} html - HTML line to parse\n   * @returns {string|null} Parsed code fence or null\n   */\n  static parseCodeBlock(html) {\n    if (html.startsWith('```')) {\n      return `<div><span class=\"code-fence\">${html}</span></div>`;\n    }\n    return null;\n  }\n\n  /**\n   * Parse bold text\n   * @param {string} html - HTML with potential bold markdown\n   * @returns {string} HTML with bold styling\n   */\n  static parseBold(html) {\n    html = html.replace(/\\*\\*(.+?)\\*\\*/g, '<strong><span class=\"syntax-marker\">**</span>$1<span class=\"syntax-marker\">**</span></strong>');\n    html = html.replace(/__(.+?)__/g, '<strong><span class=\"syntax-marker\">__</span>$1<span class=\"syntax-marker\">__</span></strong>');\n    return html;\n  }\n\n  /**\n   * Parse italic text\n   * Note: Uses lookbehind assertions - requires modern browsers\n   * @param {string} html - HTML with potential italic markdown\n   * @returns {string} HTML with italic styling\n   */\n  static parseItalic(html) {\n    html = html.replace(/(?<!\\*)\\*(?!\\*)(.+?)(?<!\\*)\\*(?!\\*)/g, '<em><span class=\"syntax-marker\">*</span>$1<span class=\"syntax-marker\">*</span></em>');\n    html = html.replace(/(?<!_)_(?!_)(.+?)(?<!_)_(?!_)/g, '<em><span class=\"syntax-marker\">_</span>$1<span class=\"syntax-marker\">_</span></em>');\n    return html;\n  }\n\n  /**\n   * Parse inline code\n   * @param {string} html - HTML with potential code markdown\n   * @returns {string} HTML with code styling\n   */\n  static parseInlineCode(html) {\n    return html.replace(/`(.+?)`/g, '<code><span class=\"syntax-marker\">`</span>$1<span class=\"syntax-marker\">`</span></code>');\n  }\n\n  /**\n   * Parse links\n   * @param {string} html - HTML with potential link markdown\n   * @returns {string} HTML with link styling\n   */\n  static parseLinks(html) {\n    return html.replace(/\\[(.+?)\\]\\((.+?)\\)/g, '<a href=\"$2\"><span class=\"syntax-marker\">[</span>$1<span class=\"syntax-marker\">](</span><span class=\"syntax-marker\">$2</span><span class=\"syntax-marker\">)</span></a>');\n  }\n\n  /**\n   * Parse all inline elements in correct order\n   * @param {string} text - Text with potential inline markdown\n   * @returns {string} HTML with all inline styling\n   */\n  static parseInlineElements(text) {\n    let html = text;\n    // Order matters: parse code first to avoid conflicts\n    html = this.parseInlineCode(html);\n    html = this.parseLinks(html);\n    html = this.parseBold(html);\n    html = this.parseItalic(html);\n    return html;\n  }\n\n  /**\n   * Parse a single line of markdown\n   * @param {string} line - Raw markdown line\n   * @returns {string} Parsed HTML line\n   */\n  static parseLine(line) {\n    let html = this.escapeHtml(line);\n    \n    // Preserve indentation\n    html = this.preserveIndentation(html, line);\n    \n    // Check for block elements first\n    const horizontalRule = this.parseHorizontalRule(html);\n    if (horizontalRule) return horizontalRule;\n    \n    const codeBlock = this.parseCodeBlock(html);\n    if (codeBlock) return codeBlock;\n    \n    // Parse block elements\n    html = this.parseHeader(html);\n    html = this.parseBlockquote(html);\n    html = this.parseBulletList(html);\n    html = this.parseNumberedList(html);\n    \n    // Parse inline elements\n    html = this.parseInlineElements(html);\n    \n    // Wrap in div to maintain line structure\n    if (html.trim() === '') {\n      return '<div>&nbsp;</div>';\n    }\n    \n    return `<div>${html}</div>`;\n  }\n\n  /**\n   * Parse full markdown text\n   * @param {string} text - Full markdown text\n   * @param {number} activeLine - Currently active line index (optional)\n   * @param {boolean} showActiveLineRaw - Show raw markdown on active line\n   * @returns {string} Parsed HTML\n   */\n  static parse(text, activeLine = -1, showActiveLineRaw = false) {\n    const lines = text.split('\\n');\n    const parsedLines = lines.map((line, index) => {\n      // Show raw markdown on active line if requested\n      if (showActiveLineRaw && index === activeLine) {\n        const content = this.escapeHtml(line) || '&nbsp;';\n        return `<div class=\"raw-line\">${content}</div>`;\n      }\n      \n      // Otherwise, parse the markdown normally\n      return this.parseLine(line);\n    });\n    \n    // Join without newlines to prevent extra spacing\n    return parsedLines.join('');\n  }\n}", "/**\n * Keyboard shortcuts handler for OverType editor\n * Uses the same handleAction method as toolbar for consistency\n */\n\n/**\n * ShortcutsManager - Handles keyboard shortcuts for the editor\n */\nexport class ShortcutsManager {\n  constructor(editor) {\n    this.editor = editor;\n    this.textarea = editor.textarea;\n    // No need to add our own listener - OverType will call handleKeydown\n  }\n\n  /**\n   * Handle keydown events - called by OverType\n   * @param {KeyboardEvent} event - The keyboard event\n   * @returns {boolean} Whether the event was handled\n   */\n  handleKeydown(event) {\n    const isMac = navigator.platform.toLowerCase().includes('mac');\n    const modKey = isMac ? event.metaKey : event.ctrlKey;\n\n    if (!modKey) return false;\n\n    let action = null;\n\n    // Map keyboard shortcuts to toolbar actions\n    switch(event.key.toLowerCase()) {\n      case 'b':\n        if (!event.shiftKey) {\n          action = 'toggleBold';\n        }\n        break;\n\n      case 'i':\n        if (!event.shiftKey) {\n          action = 'toggleItalic';\n        }\n        break;\n\n      case 'k':\n        if (!event.shiftKey) {\n          action = 'insertLink';\n        }\n        break;\n\n      case '7':\n        if (event.shiftKey) {\n          action = 'toggleNumberedList';\n        }\n        break;\n\n      case '8':\n        if (event.shiftKey) {\n          action = 'toggleBulletList';\n        }\n        break;\n    }\n\n    // If we have an action, handle it exactly like the toolbar does\n    if (action) {\n      event.preventDefault();\n      \n      // If toolbar exists, use its handleAction method (exact same code path)\n      if (this.editor.toolbar) {\n        this.editor.toolbar.handleAction(action);\n      } else {\n        // Fallback: duplicate the toolbar's handleAction logic\n        this.handleAction(action);\n      }\n      \n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Handle action - fallback when no toolbar exists\n   * This duplicates toolbar.handleAction for consistency\n   */\n  async handleAction(action) {\n    const textarea = this.textarea;\n    if (!textarea) return;\n\n    // Focus textarea\n    textarea.focus();\n\n    // Get markdown-actions functions - use global since we're in browser\n    const markdownActions = window.markdownActions;\n    if (!markdownActions) {\n      console.error('markdown-actions not available');\n      return;\n    }\n    \n    try {\n      switch (action) {\n        case 'toggleBold':\n          markdownActions.toggleBold(textarea);\n          break;\n        case 'toggleItalic':\n          markdownActions.toggleItalic(textarea);\n          break;\n        case 'insertLink':\n          markdownActions.insertLink(textarea);\n          break;\n        case 'toggleBulletList':\n          markdownActions.toggleBulletList(textarea);\n          break;\n        case 'toggleNumberedList':\n          markdownActions.toggleNumberedList(textarea);\n          break;\n      }\n\n      // Trigger input event to update preview\n      textarea.dispatchEvent(new Event('input', { bubbles: true }));\n    } catch (error) {\n      console.error('Error in markdown action:', error);\n    }\n  }\n\n  /**\n   * Cleanup\n   */\n  destroy() {\n    // Nothing to clean up since we don't add our own listener\n  }\n}", "/**\n * Built-in themes for OverType editor\n * Each theme provides a complete color palette for the editor\n */\n\n/**\n * Solar theme - Light, warm and bright\n */\nexport const solar = {\n  name: 'solar',\n  colors: {\n    bgPrimary: '#faf0ca',        // Lemon Chiffon - main background\n    bgSecondary: '#ffffff',      // White - editor background\n    text: '#0d3b66',             // Yale Blue - main text\n    h1: '#f95738',               // Tomato - h1 headers\n    h2: '#ee964b',               // Sandy Brown - h2 headers  \n    h3: '#3d8a51',               // Forest green - h3 headers\n    strong: '#ee964b',           // Sandy Brown - bold text\n    em: '#f95738',               // Tomato - italic text\n    link: '#0d3b66',             // Yale Blue - links\n    code: '#0d3b66',             // Yale Blue - inline code\n    codeBg: 'rgba(244, 211, 94, 0.4)', // Naples Yellow with transparency\n    blockquote: '#5a7a9b',       // Muted blue - blockquotes\n    hr: '#5a7a9b',               // Muted blue - horizontal rules\n    syntaxMarker: 'rgba(13, 59, 102, 0.52)', // Yale Blue with transparency\n    cursor: '#f95738',           // Tomato - cursor\n    selection: 'rgba(244, 211, 94, 0.4)', // Naples Yellow with transparency\n    listMarker: '#ee964b',       // Sandy Brown - list markers\n  }\n};\n\n/**\n * Cave theme - Dark ocean depths\n */\nexport const cave = {\n  name: 'cave',\n  colors: {\n    bgPrimary: '#141E26',        // Deep ocean - main background\n    bgSecondary: '#1D2D3E',      // Darker charcoal - editor background\n    text: '#c5dde8',             // Light blue-gray - main text\n    h1: '#d4a5ff',               // Rich lavender - h1 headers\n    h2: '#f6ae2d',               // Hunyadi Yellow - h2 headers\n    h3: '#9fcfec',               // Brighter blue - h3 headers\n    strong: '#f6ae2d',           // Hunyadi Yellow - bold text\n    em: '#9fcfec',               // Brighter blue - italic text\n    link: '#9fcfec',             // Brighter blue - links\n    code: '#c5dde8',             // Light blue-gray - inline code\n    codeBg: '#1a232b',           // Very dark blue - code background\n    blockquote: '#9fcfec',       // Brighter blue - same as italic\n    hr: '#c5dde8',               // Light blue-gray - horizontal rules\n    syntaxMarker: 'rgba(159, 207, 236, 0.73)', // Brighter blue semi-transparent\n    cursor: '#f26419',           // Orange Pantone - cursor\n    selection: 'rgba(51, 101, 138, 0.4)', // Lapis Lazuli with transparency\n    listMarker: '#f6ae2d',       // Hunyadi Yellow - list markers\n  }\n};\n\n/**\n * Default themes registry\n */\nexport const themes = {\n  solar,\n  cave,\n  // Aliases for backward compatibility\n  light: solar,\n  dark: cave\n};\n\n/**\n * Get theme by name or return custom theme object\n * @param {string|Object} theme - Theme name or custom theme object\n * @returns {Object} Theme configuration\n */\nexport function getTheme(theme) {\n  if (typeof theme === 'string') {\n    const themeObj = themes[theme] || themes.solar;\n    // Preserve the requested theme name (important for 'light' and 'dark' aliases)\n    return { ...themeObj, name: theme };\n  }\n  return theme;\n}\n\n/**\n * Apply theme colors to CSS variables\n * @param {Object} colors - Theme colors object\n * @returns {string} CSS custom properties string\n */\nexport function themeToCSSVars(colors) {\n  const vars = [];\n  for (const [key, value] of Object.entries(colors)) {\n    // Convert camelCase to kebab-case\n    const varName = key.replace(/([A-Z])/g, '-$1').toLowerCase();\n    vars.push(`--${varName}: ${value};`);\n  }\n  return vars.join('\\n');\n}\n\n/**\n * Merge custom colors with base theme\n * @param {Object} baseTheme - Base theme object\n * @param {Object} customColors - Custom color overrides\n * @returns {Object} Merged theme object\n */\nexport function mergeTheme(baseTheme, customColors = {}) {\n  return {\n    ...baseTheme,\n    colors: {\n      ...baseTheme.colors,\n      ...customColors\n    }\n  };\n}", "/**\n * CSS styles for OverType editor\n * Embedded in JavaScript to ensure single-file distribution\n */\n\nimport { themeToCSSVars } from './themes.js';\n\n/**\n * Generate the complete CSS for the editor\n * @param {Object} options - Configuration options\n * @returns {string} Complete CSS string\n */\nexport function generateStyles(options = {}) {\n  const {\n    fontSize = '14px',\n    lineHeight = 1.6,\n    fontFamily = \"'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace\",\n    padding = '20px',\n    theme = null,\n    mobile = {}\n  } = options;\n\n  // Generate mobile overrides\n  const mobileStyles = Object.keys(mobile).length > 0 ? `\n    @media (max-width: 640px) {\n      .overtype-wrapper .overtype-input,\n      .overtype-wrapper .overtype-preview {\n        ${Object.entries(mobile)\n          .map(([prop, val]) => {\n            const cssProp = prop.replace(/([A-Z])/g, '-$1').toLowerCase();\n            return `${cssProp}: ${val} !important;`;\n          })\n          .join('\\n        ')}\n      }\n    }\n  ` : '';\n\n  // Generate theme variables if provided\n  const themeVars = theme && theme.colors ? themeToCSSVars(theme.colors) : '';\n\n  return `\n    /* OverType Editor Styles */\n    .overtype-wrapper {\n      position: relative !important;\n      width: 100% !important;\n      height: 100% !important;\n      overflow: hidden !important;\n      background: var(--bg-secondary, #ffffff) !important;\n      ${themeVars ? `\n      /* Theme Variables */\n      ${themeVars}` : ''}\n    }\n\n    /* Critical alignment styles - must be identical for both layers */\n    .overtype-wrapper .overtype-input,\n    .overtype-wrapper .overtype-preview {\n      /* Positioning - must be identical */\n      position: absolute !important;\n      top: 0 !important;\n      left: 0 !important;\n      width: 100% !important;\n      height: 100% !important;\n      \n      /* Font properties - any difference breaks alignment */\n      font-family: ${fontFamily} !important;\n      font-size: var(--instance-font-size, ${fontSize}) !important;\n      line-height: var(--instance-line-height, ${lineHeight}) !important;\n      font-weight: normal !important;\n      font-style: normal !important;\n      font-variant: normal !important;\n      font-stretch: normal !important;\n      font-kerning: none !important;\n      font-feature-settings: normal !important;\n      \n      /* Box model - must match exactly */\n      padding: var(--instance-padding, ${padding}) !important;\n      margin: 0 !important;\n      border: none !important;\n      outline: none !important;\n      box-sizing: border-box !important;\n      \n      /* Text layout - critical for character positioning */\n      white-space: pre-wrap !important;\n      word-wrap: break-word !important;\n      word-break: normal !important;\n      overflow-wrap: break-word !important;\n      tab-size: 2 !important;\n      -moz-tab-size: 2 !important;\n      text-align: left !important;\n      text-indent: 0 !important;\n      letter-spacing: normal !important;\n      word-spacing: normal !important;\n      \n      /* Text rendering */\n      text-transform: none !important;\n      text-rendering: auto !important;\n      -webkit-font-smoothing: auto !important;\n      -webkit-text-size-adjust: 100% !important;\n      \n      /* Direction and writing */\n      direction: ltr !important;\n      writing-mode: horizontal-tb !important;\n      unicode-bidi: normal !important;\n      text-orientation: mixed !important;\n      \n      /* Visual effects that could shift perception */\n      text-shadow: none !important;\n      filter: none !important;\n      transform: none !important;\n      zoom: 1 !important;\n      \n      /* Vertical alignment */\n      vertical-align: baseline !important;\n      \n      /* Size constraints */\n      min-width: 0 !important;\n      min-height: 0 !important;\n      max-width: none !important;\n      max-height: none !important;\n      \n      /* Overflow */\n      overflow-y: auto !important;\n      overflow-x: auto !important;\n      scrollbar-width: auto !important;\n      scrollbar-gutter: auto !important;\n      \n      /* Animation/transition - disabled to prevent movement */\n      animation: none !important;\n      transition: none !important;\n    }\n\n    /* Input layer styles */\n    .overtype-wrapper .overtype-input {\n      /* Layer positioning */\n      z-index: 1 !important;\n      \n      /* Text visibility */\n      color: transparent !important;\n      caret-color: var(--cursor, #f95738) !important;\n      background-color: transparent !important;\n      \n      /* Textarea-specific */\n      resize: none !important;\n      appearance: none !important;\n      -webkit-appearance: none !important;\n      -moz-appearance: none !important;\n      \n      /* Prevent mobile zoom on focus */\n      touch-action: manipulation !important;\n      \n      /* Disable autofill and spellcheck */\n      autocomplete: off !important;\n      autocorrect: off !important;\n      autocapitalize: off !important;\n      spellcheck: false !important;\n    }\n\n    .overtype-wrapper .overtype-input::selection {\n      background-color: var(--selection, rgba(244, 211, 94, 0.4));\n    }\n\n    /* Preview layer styles */\n    .overtype-wrapper .overtype-preview {\n      /* Layer positioning */\n      z-index: 0 !important;\n      pointer-events: none !important;\n      color: var(--text, #0d3b66) !important;\n      background-color: transparent !important;\n      \n      /* Prevent text selection */\n      user-select: none !important;\n      -webkit-user-select: none !important;\n      -moz-user-select: none !important;\n      -ms-user-select: none !important;\n    }\n\n    /* Defensive styles for preview child divs */\n    .overtype-wrapper .overtype-preview div {\n      /* Reset any inherited styles */\n      margin: 0 !important;\n      padding: 0 !important;\n      border: none !important;\n      text-align: left !important;\n      text-indent: 0 !important;\n      display: block !important;\n      position: static !important;\n      transform: none !important;\n      min-height: 0 !important;\n      max-height: none !important;\n      line-height: inherit !important;\n      font-size: inherit !important;\n      font-family: inherit !important;\n    }\n\n    /* Markdown element styling - NO SIZE CHANGES */\n    .overtype-wrapper .overtype-preview .header {\n      font-weight: bold !important;\n    }\n\n    /* Header colors */\n    .overtype-wrapper .overtype-preview .h1 { \n      color: var(--h1, #f95738) !important; \n    }\n    .overtype-wrapper .overtype-preview .h2 { \n      color: var(--h2, #ee964b) !important; \n    }\n    .overtype-wrapper .overtype-preview .h3 { \n      color: var(--h3, #3d8a51) !important; \n    }\n\n    /* Bold text */\n    .overtype-wrapper .overtype-preview strong {\n      color: var(--strong, #ee964b) !important;\n      font-weight: bold !important;\n    }\n\n    /* Italic text */\n    .overtype-wrapper .overtype-preview em {\n      color: var(--em, #f95738) !important;\n      text-decoration-color: var(--em, #f95738) !important;\n      text-decoration-thickness: 1px !important;\n      font-style: italic !important;\n    }\n\n    /* Inline code */\n    .overtype-wrapper .overtype-preview code {\n      background: var(--code-bg, rgba(244, 211, 94, 0.4)) !important;\n      color: var(--code, #0d3b66) !important;\n      padding: 0 !important;\n      border-radius: 2px !important;\n      font-family: inherit !important;\n      font-weight: normal !important;\n    }\n\n    /* Code blocks */\n    .overtype-wrapper .overtype-preview pre {\n      background: #1e1e1e !important;\n      padding: 0 !important;\n      margin: 0 !important;\n      border-radius: 4px !important;\n      overflow-x: auto !important;\n    }\n\n    .overtype-wrapper .overtype-preview pre code {\n      background: none !important;\n    }\n\n    /* Blockquotes */\n    .overtype-wrapper .overtype-preview .blockquote {\n      color: var(--blockquote, #5a7a9b) !important;\n      padding: 0 !important;\n      margin: 0 !important;\n      border: none !important;\n    }\n\n    /* Links */\n    .overtype-wrapper .overtype-preview a {\n      color: var(--link, #0d3b66) !important;\n      text-decoration: underline !important;\n      font-weight: normal !important;\n    }\n\n    .overtype-wrapper .overtype-preview a:hover {\n      text-decoration: underline !important;\n      color: var(--link, #0d3b66) !important;\n    }\n\n    /* Lists - no list styling */\n    .overtype-wrapper .overtype-preview ul,\n    .overtype-wrapper .overtype-preview ol {\n      list-style: none !important;\n      margin: 0 !important;\n      padding: 0 !important;\n    }\n\n    .overtype-wrapper .overtype-preview li {\n      margin: 0 !important;\n      padding: 0 !important;\n      list-style: none !important;\n    }\n\n    /* Horizontal rules */\n    .overtype-wrapper .overtype-preview hr {\n      border: none !important;\n      color: var(--hr, #5a7a9b) !important;\n      margin: 0 !important;\n      padding: 0 !important;\n    }\n\n    .overtype-wrapper .overtype-preview .hr-marker {\n      color: var(--hr, #5a7a9b) !important;\n      opacity: 0.6 !important;\n    }\n\n    /* Code fence markers - with background when not in code block */\n    .overtype-wrapper .overtype-preview .code-fence {\n      color: var(--code, #0d3b66) !important;\n      background: var(--code-bg, rgba(244, 211, 94, 0.4)) !important;\n    }\n    \n    /* Code block lines - background for entire code block */\n    .overtype-wrapper .overtype-preview .code-block-line {\n      background: var(--code-bg, rgba(244, 211, 94, 0.4)) !important;\n    }\n    \n    /* Remove background from code fence when inside code block line */\n    .overtype-wrapper .overtype-preview .code-block-line .code-fence {\n      background: transparent !important;\n    }\n\n    /* Raw markdown line */\n    .overtype-wrapper .overtype-preview .raw-line {\n      color: var(--raw-line, #5a7a9b) !important;\n      font-style: normal !important;\n      font-weight: normal !important;\n    }\n\n    /* Syntax markers */\n    .overtype-wrapper .overtype-preview .syntax-marker {\n      color: var(--syntax-marker, rgba(13, 59, 102, 0.52)) !important;\n      opacity: 0.7 !important;\n    }\n\n    /* List markers */\n    .overtype-wrapper .overtype-preview .list-marker {\n      color: var(--list-marker, #ee964b) !important;\n    }\n\n    /* Stats bar */\n    .overtype-wrapper.with-stats {\n      padding-bottom: 40px !important;\n    }\n    \n    .overtype-wrapper .overtype-stats {\n      position: absolute !important;\n      bottom: 0 !important;\n      left: 0 !important;\n      right: 0 !important;\n      height: 40px !important;\n      padding: 0 20px !important;\n      background: #f8f9fa !important;\n      border-top: 1px solid #e0e0e0 !important;\n      display: flex !important;\n      justify-content: space-between !important;\n      align-items: center !important;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;\n      font-size: 0.85rem !important;\n      color: #666 !important;\n      z-index: 2 !important;\n    }\n    \n    /* Dark theme stats bar */\n    .overtype-wrapper[data-theme=\"cave\"] .overtype-stats {\n      background: var(--bg-secondary, #1D2D3E) !important;\n      border-top: 1px solid rgba(197, 221, 232, 0.1) !important;\n      color: var(--text, #c5dde8) !important;\n    }\n    \n    .overtype-wrapper .overtype-stats .overtype-stat {\n      display: flex !important;\n      align-items: center !important;\n      gap: 5px !important;\n      white-space: nowrap !important;\n    }\n    \n    .overtype-wrapper .overtype-stats .live-dot {\n      width: 8px !important;\n      height: 8px !important;\n      background: #4caf50 !important;\n      border-radius: 50% !important;\n      animation: pulse 2s infinite !important;\n    }\n    \n    @keyframes pulse {\n      0%, 100% { opacity: 1; transform: scale(1); }\n      50% { opacity: 0.6; transform: scale(1.2); }\n    }\n    \n    /* Adjust textarea and preview for stats bar */\n    .overtype-wrapper.with-stats .overtype-input,\n    .overtype-wrapper.with-stats .overtype-preview {\n      height: calc(100% - 40px) !important;\n    }\n\n    /* Toolbar Styles */\n    .overtype-toolbar {\n      display: flex;\n      align-items: center;\n      gap: 4px;\n      padding: 8px;\n      background: var(--bg-primary, #f8f9fa);\n      border: 1px solid var(--border, #e0e0e0);\n      border-bottom: none;\n      border-radius: 8px 8px 0 0;\n      overflow-x: auto;\n      -webkit-overflow-scrolling: touch;\n    }\n\n    .overtype-toolbar-button {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      width: 32px;\n      height: 32px;\n      padding: 0;\n      border: none;\n      border-radius: 6px;\n      background: transparent;\n      color: var(--text-secondary, #666);\n      cursor: pointer;\n      transition: all 0.2s ease;\n      flex-shrink: 0;\n    }\n\n    .overtype-toolbar-button svg {\n      width: 20px;\n      height: 20px;\n      fill: currentColor;\n    }\n    \n    /* Special sizing for code block icon */\n    .overtype-toolbar-button[data-action=\"insertCodeBlock\"] svg {\n      width: 24px;\n      height: 18px;\n      fill: transparent !important;\n    }\n\n    .overtype-toolbar-button:hover {\n      background: var(--bg-secondary, #e9ecef);\n      color: var(--text-primary, #333);\n    }\n\n    .overtype-toolbar-button:active {\n      transform: scale(0.95);\n    }\n\n    .overtype-toolbar-button.active {\n      background: var(--primary, #007bff);\n      color: white;\n    }\n\n    .overtype-toolbar-button:disabled {\n      opacity: 0.5;\n      cursor: not-allowed;\n    }\n\n    .overtype-toolbar-separator {\n      width: 1px;\n      height: 24px;\n      background: var(--border, #e0e0e0);\n      margin: 0 4px;\n      flex-shrink: 0;\n    }\n\n    /* Adjust wrapper when toolbar is present */\n    .overtype-toolbar + .overtype-wrapper {\n      border-radius: 0 0 8px 8px;\n      border-top: none;\n    }\n\n    /* Mobile toolbar adjustments */\n    @media (max-width: 640px) {\n      .overtype-toolbar {\n        padding: 6px;\n        gap: 2px;\n      }\n\n      .overtype-toolbar-button {\n        width: 36px;\n        height: 36px;\n      }\n\n      .overtype-toolbar-separator {\n        margin: 0 2px;\n      }\n    }\n\n    ${mobileStyles}\n  `;\n}", "/**\n * SVG icons for OverType toolbar\n * Quill-style icons with inline styles\n */\n\nexport const boldIcon = `<svg viewBox=\"0 0 18 18\">\n  <path stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z\"></path>\n  <path stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z\"></path>\n</svg>`;\n\nexport const italicIcon = `<svg viewBox=\"0 0 18 18\">\n  <line stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" x1=\"7\" x2=\"13\" y1=\"4\" y2=\"4\"></line>\n  <line stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" x1=\"5\" x2=\"11\" y1=\"14\" y2=\"14\"></line>\n  <line stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" x1=\"8\" x2=\"10\" y1=\"14\" y2=\"4\"></line>\n</svg>`;\n\nexport const h1Icon = `<svg viewBox=\"0 0 18 18\">\n  <path fill=\"currentColor\" d=\"M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z\"></path>\n</svg>`;\n\nexport const h2Icon = `<svg viewBox=\"0 0 18 18\">\n  <path fill=\"currentColor\" d=\"M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z\"></path>\n</svg>`;\n\nexport const h3Icon = `<svg viewBox=\"0 0 18 18\">\n  <path fill=\"currentColor\" d=\"M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z\"></path>\n</svg>`;\n\nexport const linkIcon = `<svg viewBox=\"0 0 18 18\">\n  <line stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" x1=\"7\" x2=\"11\" y1=\"7\" y2=\"11\"></line>\n  <path stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z\"></path>\n  <path stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z\"></path>\n</svg>`;\n\nexport const codeIcon = `<svg viewBox=\"0 0 18 18\">\n  <polyline stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" points=\"5 7 3 9 5 11\"></polyline>\n  <polyline stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" points=\"13 7 15 9 13 11\"></polyline>\n  <line stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" x1=\"10\" x2=\"8\" y1=\"5\" y2=\"13\"></line>\n</svg>`;\n\nexport const codeBlockIcon = `<svg viewBox=\"0 0 46 33\" fill=\"transparent\" xmlns=\"http://www.w3.org/2000/svg\">\n  <path d=\"M35 8h3a5 5 0 0 1 5 5v12a5 5 0 0 1-5 5H18a5 5 0 0 1-5-5v-2\" stroke=\"currentColor\" stroke-width=\"4\" stroke-linecap=\"round\"></path>\n  <path d=\"m9 2.5-6 6L9 14M20 2.5l6 6-6 5.5\" stroke=\"currentColor\" stroke-width=\"4\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path>\n</svg>`;\n\nexport const bulletListIcon = `<svg viewBox=\"0 0 18 18\">\n  <line stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" x1=\"6\" x2=\"15\" y1=\"4\" y2=\"4\"></line>\n  <line stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" x1=\"6\" x2=\"15\" y1=\"9\" y2=\"9\"></line>\n  <line stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" x1=\"6\" x2=\"15\" y1=\"14\" y2=\"14\"></line>\n  <line stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" x1=\"3\" x2=\"3\" y1=\"4\" y2=\"4\"></line>\n  <line stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" x1=\"3\" x2=\"3\" y1=\"9\" y2=\"9\"></line>\n  <line stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" x1=\"3\" x2=\"3\" y1=\"14\" y2=\"14\"></line>\n</svg>`;\n\nexport const orderedListIcon = `<svg viewBox=\"0 0 18 18\">\n  <line stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" x1=\"7\" x2=\"15\" y1=\"4\" y2=\"4\"></line>\n  <line stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" x1=\"7\" x2=\"15\" y1=\"9\" y2=\"9\"></line>\n  <line stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" x1=\"7\" x2=\"15\" y1=\"14\" y2=\"14\"></line>\n  <line stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1\" x1=\"2.5\" x2=\"4.5\" y1=\"5.5\" y2=\"5.5\"></line>\n  <path fill=\"currentColor\" d=\"M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z\"></path>\n  <path stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1\" d=\"M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156\"></path>\n  <path stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1\" d=\"M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109\"></path>\n</svg>`;", "/**\n * Toolbar component for OverType editor\n * Provides markdown formatting buttons with icons\n */\n\nimport * as icons from './icons.js';\n\nexport class Toolbar {\n  constructor(editor) {\n    this.editor = editor;\n    this.container = null;\n    this.buttons = {};\n  }\n\n  /**\n   * Create and attach toolbar to editor\n   */\n  create() {\n    // Create toolbar container\n    this.container = document.createElement('div');\n    this.container.className = 'overtype-toolbar';\n    this.container.setAttribute('role', 'toolbar');\n    this.container.setAttribute('aria-label', 'Text formatting');\n\n    // Define toolbar buttons\n    const buttonConfig = [\n      { name: 'bold', icon: icons.boldIcon, title: 'Bold (Ctrl+B)', action: 'toggleBold' },\n      { name: 'italic', icon: icons.italicIcon, title: 'Italic (Ctrl+I)', action: 'toggleItalic' },\n      { separator: true },\n      { name: 'h1', icon: icons.h1Icon, title: 'Heading 1', action: 'insertH1' },\n      { name: 'h2', icon: icons.h2Icon, title: 'Heading 2', action: 'insertH2' },\n      { name: 'h3', icon: icons.h3Icon, title: 'Heading 3', action: 'insertH3' },\n      { separator: true },\n      { name: 'link', icon: icons.linkIcon, title: 'Insert Link (Ctrl+K)', action: 'insertLink' },\n      { name: 'code', icon: icons.codeIcon, title: 'Inline Code', action: 'toggleCode' },\n      { name: 'codeBlock', icon: icons.codeBlockIcon, title: 'Code Block', action: 'insertCodeBlock' },\n      { separator: true },\n      { name: 'bulletList', icon: icons.bulletListIcon, title: 'Bullet List', action: 'toggleBulletList' },\n      { name: 'orderedList', icon: icons.orderedListIcon, title: 'Numbered List', action: 'toggleNumberedList' }\n    ];\n\n    // Create buttons\n    buttonConfig.forEach(config => {\n      if (config.separator) {\n        const separator = document.createElement('div');\n        separator.className = 'overtype-toolbar-separator';\n        separator.setAttribute('role', 'separator');\n        this.container.appendChild(separator);\n      } else {\n        const button = this.createButton(config);\n        this.buttons[config.name] = button;\n        this.container.appendChild(button);\n      }\n    });\n\n    // Insert toolbar before editor wrapper\n    const wrapper = this.editor.element.querySelector('.overtype-wrapper');\n    if (wrapper) {\n      this.editor.element.insertBefore(this.container, wrapper);\n    }\n\n    return this.container;\n  }\n\n  /**\n   * Create individual toolbar button\n   */\n  createButton(config) {\n    const button = document.createElement('button');\n    button.className = 'overtype-toolbar-button';\n    button.type = 'button';\n    button.title = config.title;\n    button.setAttribute('aria-label', config.title);\n    button.setAttribute('data-action', config.action);\n    button.innerHTML = config.icon;\n\n    // Add click handler\n    button.addEventListener('click', (e) => {\n      e.preventDefault();\n      this.handleAction(config.action);\n    });\n\n    return button;\n  }\n\n  /**\n   * Handle toolbar button actions\n   */\n  async handleAction(action) {\n    const textarea = this.editor.textarea;\n    if (!textarea) return;\n\n    // Focus textarea\n    textarea.focus();\n\n    // Get markdown-actions functions - use global since we're in browser\n    const markdownActions = window.markdownActions;\n    if (!markdownActions) {\n      console.error('markdown-actions not available');\n      return;\n    }\n    \n    try {\n      \n      switch (action) {\n        case 'toggleBold':\n          markdownActions.toggleBold(textarea);\n          break;\n        case 'toggleItalic':\n          markdownActions.toggleItalic(textarea);\n          break;\n        case 'insertH1':\n          markdownActions.insertHeader(textarea, 1);\n          break;\n        case 'insertH2':\n          markdownActions.insertHeader(textarea, 2);\n          break;\n        case 'insertH3':\n          markdownActions.insertHeader(textarea, 3);\n          break;\n        case 'insertLink':\n          markdownActions.insertLink(textarea);\n          break;\n        case 'toggleCode':\n          markdownActions.toggleCode(textarea);\n          break;\n        case 'insertCodeBlock':\n          markdownActions.insertCodeBlock(textarea);\n          break;\n        case 'toggleBulletList':\n          markdownActions.toggleBulletList(textarea);\n          break;\n        case 'toggleNumberedList':\n          markdownActions.toggleNumberedList(textarea);\n          break;\n      }\n\n      // Trigger input event to update preview\n      textarea.dispatchEvent(new Event('input', { bubbles: true }));\n    } catch (error) {\n      console.error('Error loading markdown-actions:', error);\n    }\n  }\n\n  /**\n   * Update toolbar button states based on current selection\n   */\n  async updateButtonStates() {\n    const textarea = this.editor.textarea;\n    if (!textarea) return;\n\n    // Get markdown-actions functions - use global since we're in browser\n    const markdownActions = window.markdownActions;\n    if (!markdownActions) {\n      return; // Silently fail if markdown-actions not available\n    }\n\n    try {\n      const activeFormats = markdownActions.getActiveFormats(textarea);\n\n      // Update button states\n      Object.entries(this.buttons).forEach(([name, button]) => {\n        let isActive = false;\n        \n        switch (name) {\n          case 'bold':\n            isActive = activeFormats.includes('bold');\n            break;\n          case 'italic':\n            isActive = activeFormats.includes('italic');\n            break;\n          case 'code':\n            isActive = activeFormats.includes('code');\n            break;\n          case 'bulletList':\n            isActive = activeFormats.includes('bulletList');\n            break;\n          case 'orderedList':\n            isActive = activeFormats.includes('orderedList');\n            break;\n          case 'h1':\n            isActive = activeFormats.includes('header1');\n            break;\n          case 'h2':\n            isActive = activeFormats.includes('header2');\n            break;\n          case 'h3':\n            isActive = activeFormats.includes('header3');\n            break;\n        }\n\n        button.classList.toggle('active', isActive);\n        button.setAttribute('aria-pressed', isActive.toString());\n      });\n    } catch (error) {\n      // Silently fail if markdown-actions not available\n    }\n  }\n\n  /**\n   * Destroy toolbar\n   */\n  destroy() {\n    if (this.container) {\n      this.container.remove();\n      this.container = null;\n      this.buttons = {};\n    }\n  }\n}", "/**\n * OverType - A lightweight markdown editor library with perfect WYSIWYG alignment\n * @version 1.0.0\n * @license MIT\n */\n\nimport { MarkdownParser } from './parser.js';\nimport { ShortcutsManager } from './shortcuts.js';\nimport { generateStyles } from './styles.js';\nimport { getTheme, mergeTheme, solar } from './themes.js';\nimport { Toolbar } from './toolbar.js';\n\n/**\n * OverType Editor Class\n */\nclass OverType {\n    // Static properties\n    static instances = new WeakMap();\n    static stylesInjected = false;\n    static globalListenersInitialized = false;\n    static instanceCount = 0;\n\n    /**\n     * Constructor - Always returns an array of instances\n     * @param {string|Element|NodeList|Array} target - Target element(s)\n     * @param {Object} options - Configuration options\n     * @returns {Array} Array of OverType instances\n     */\n    constructor(target, options = {}) {\n      // Convert target to array of elements\n      let elements;\n      \n      if (typeof target === 'string') {\n        elements = document.querySelectorAll(target);\n        if (elements.length === 0) {\n          throw new Error(`No elements found for selector: ${target}`);\n        }\n        elements = Array.from(elements);\n      } else if (target instanceof Element) {\n        elements = [target];\n      } else if (target instanceof NodeList) {\n        elements = Array.from(target);\n      } else if (Array.isArray(target)) {\n        elements = target;\n      } else {\n        throw new Error('Invalid target: must be selector string, Element, NodeList, or Array');\n      }\n\n      // Initialize all elements and return array\n      const instances = elements.map(element => {\n        // Check for existing instance\n        if (element.overTypeInstance) {\n          // Re-init existing instance\n          element.overTypeInstance.reinit(options);\n          return element.overTypeInstance;\n        }\n\n        // Create new instance\n        const instance = Object.create(OverType.prototype);\n        instance._init(element, options);\n        element.overTypeInstance = instance;\n        OverType.instances.set(element, instance);\n        return instance;\n      });\n\n      return instances;\n    }\n\n    /**\n     * Internal initialization\n     * @private\n     */\n    _init(element, options = {}) {\n      this.element = element;\n      this.options = this._mergeOptions(options);\n      this.instanceId = ++OverType.instanceCount;\n      this.initialized = false;\n\n      // Inject styles if needed\n      OverType.injectStyles();\n\n      // Initialize global listeners\n      OverType.initGlobalListeners();\n\n      // Check for existing OverType DOM structure\n      const wrapper = element.querySelector('.overtype-wrapper');\n      if (wrapper) {\n        this._recoverFromDOM(wrapper);\n      } else {\n        this._buildFromScratch();\n      }\n\n      // Setup shortcuts manager\n      this.shortcuts = new ShortcutsManager(this);\n\n      // Setup toolbar if enabled\n      if (this.options.toolbar) {\n        this.toolbar = new Toolbar(this);\n        this.toolbar.create();\n        \n        // Update toolbar states on selection change\n        this.textarea.addEventListener('selectionchange', () => {\n          this.toolbar.updateButtonStates();\n        });\n        this.textarea.addEventListener('input', () => {\n          this.toolbar.updateButtonStates();\n        });\n      }\n\n      // Mark as initialized\n      this.initialized = true;\n\n      // Call onChange if provided\n      if (this.options.onChange) {\n        this.options.onChange(this.getValue(), this);\n      }\n    }\n\n    /**\n     * Merge user options with defaults\n     * @private\n     */\n    _mergeOptions(options) {\n      const defaults = {\n        // Typography\n        fontSize: '14px',\n        lineHeight: 1.6,\n        fontFamily: \"'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace\",\n        padding: '16px',\n        \n        // Mobile styles\n        mobile: {\n          fontSize: '16px',  // Prevent zoom on iOS\n          padding: '12px',\n          lineHeight: 1.5\n        },\n        \n        // Behavior\n        autofocus: false,\n        placeholder: 'Start typing...',\n        value: '',\n        \n        // Callbacks\n        onChange: null,\n        onKeydown: null,\n        \n        // Features\n        showActiveLineRaw: false,\n        showStats: false,\n        toolbar: false,\n        statsFormatter: null\n      };\n      \n      // Remove theme and colors from options - these are now global\n      const { theme, colors, ...cleanOptions } = options;\n      \n      return {\n        ...defaults,\n        ...cleanOptions\n      };\n    }\n\n    /**\n     * Recover from existing DOM structure\n     * @private\n     */\n    _recoverFromDOM(wrapper) {\n      this.wrapper = wrapper;\n      this.textarea = wrapper.querySelector('.overtype-input');\n      this.preview = wrapper.querySelector('.overtype-preview');\n\n      if (!this.textarea || !this.preview) {\n        // Partial DOM - clear and rebuild\n        wrapper.remove();\n        this._buildFromScratch();\n        return;\n      }\n\n      // Store reference on wrapper\n      this.wrapper._instance = this;\n      \n      // Apply instance-specific styles via CSS custom properties\n      if (this.options.fontSize) {\n        this.wrapper.style.setProperty('--instance-font-size', this.options.fontSize);\n      }\n      if (this.options.lineHeight) {\n        this.wrapper.style.setProperty('--instance-line-height', String(this.options.lineHeight));\n      }\n      if (this.options.padding) {\n        this.wrapper.style.setProperty('--instance-padding', this.options.padding);\n      }\n\n      // Disable autofill, spellcheck, and extensions\n      this._configureTextarea();\n\n      // Apply any new options\n      this._applyOptions();\n    }\n\n    /**\n     * Build editor from scratch\n     * @private\n     */\n    _buildFromScratch() {\n      // Extract any existing content\n      const content = this._extractContent();\n\n      // Clear element\n      this.element.innerHTML = '';\n\n      // Create DOM structure\n      this._createDOM();\n\n      // Set initial content\n      if (content || this.options.value) {\n        this.setValue(content || this.options.value);\n      }\n\n      // Apply options\n      this._applyOptions();\n    }\n\n    /**\n     * Extract content from element\n     * @private\n     */\n    _extractContent() {\n      // Look for existing OverType textarea\n      const textarea = this.element.querySelector('.overtype-input');\n      if (textarea) return textarea.value;\n\n      // Use element's text content as fallback\n      return this.element.textContent || '';\n    }\n\n    /**\n     * Create DOM structure\n     * @private\n     */\n    _createDOM() {\n      // Create wrapper\n      this.wrapper = document.createElement('div');\n      this.wrapper.className = 'overtype-wrapper';\n      \n      // Set current global theme\n      const currentTheme = OverType.currentTheme || solar;\n      const themeName = typeof currentTheme === 'string' ? currentTheme : currentTheme.name;\n      if (themeName) {\n        this.wrapper.setAttribute('data-theme', themeName);\n      }\n      \n      // Add stats wrapper class if stats are enabled\n      if (this.options.showStats) {\n        this.wrapper.classList.add('with-stats');\n      }\n      \n      // Apply instance-specific styles via CSS custom properties\n      if (this.options.fontSize) {\n        this.wrapper.style.setProperty('--instance-font-size', this.options.fontSize);\n      }\n      if (this.options.lineHeight) {\n        this.wrapper.style.setProperty('--instance-line-height', String(this.options.lineHeight));\n      }\n      if (this.options.padding) {\n        this.wrapper.style.setProperty('--instance-padding', this.options.padding);\n      }\n      \n      this.wrapper._instance = this;\n\n      // Create textarea\n      this.textarea = document.createElement('textarea');\n      this.textarea.className = 'overtype-input';\n      this.textarea.placeholder = this.options.placeholder;\n      this._configureTextarea();\n\n      // Create preview div\n      this.preview = document.createElement('div');\n      this.preview.className = 'overtype-preview';\n      this.preview.setAttribute('aria-hidden', 'true');\n\n      // Assemble DOM\n      this.wrapper.appendChild(this.textarea);\n      this.wrapper.appendChild(this.preview);\n      \n      // Add stats bar if enabled\n      if (this.options.showStats) {\n        this.statsBar = document.createElement('div');\n        this.statsBar.className = 'overtype-stats';\n        this.wrapper.appendChild(this.statsBar);\n        this._updateStats();\n      }\n      \n      this.element.appendChild(this.wrapper);\n    }\n\n    /**\n     * Configure textarea attributes\n     * @private\n     */\n    _configureTextarea() {\n      this.textarea.setAttribute('autocomplete', 'off');\n      this.textarea.setAttribute('autocorrect', 'off');\n      this.textarea.setAttribute('autocapitalize', 'off');\n      this.textarea.setAttribute('spellcheck', 'false');\n      this.textarea.setAttribute('data-gramm', 'false');\n      this.textarea.setAttribute('data-gramm_editor', 'false');\n      this.textarea.setAttribute('data-enable-grammarly', 'false');\n    }\n\n    /**\n     * Apply options to the editor\n     * @private\n     */\n    _applyOptions() {\n      // Apply autofocus\n      if (this.options.autofocus) {\n        this.textarea.focus();\n      }\n\n      // Update preview with initial content\n      this.updatePreview();\n    }\n\n    /**\n     * Update preview with parsed markdown\n     */\n    updatePreview() {\n      const text = this.textarea.value;\n      const cursorPos = this.textarea.selectionStart;\n      const activeLine = this._getCurrentLine(text, cursorPos);\n      \n      // Parse markdown\n      const html = MarkdownParser.parse(text, activeLine, this.options.showActiveLineRaw);\n      this.preview.innerHTML = html || '<span style=\"color: #808080;\">Start typing...</span>';\n      \n      // Apply code block backgrounds\n      this._applyCodeBlockBackgrounds();\n      \n      // Update stats if enabled\n      if (this.options.showStats && this.statsBar) {\n        this._updateStats();\n      }\n      \n      // Trigger onChange callback\n      if (this.options.onChange && this.initialized) {\n        this.options.onChange(text, this);\n      }\n    }\n\n    /**\n     * Apply background styling to code blocks\n     * @private\n     */\n    _applyCodeBlockBackgrounds() {\n      // Find all code fence elements\n      const codeFences = this.preview.querySelectorAll('.code-fence');\n      \n      // Process pairs of code fences\n      for (let i = 0; i < codeFences.length - 1; i += 2) {\n        const openFence = codeFences[i];\n        const closeFence = codeFences[i + 1];\n        \n        // Get parent divs\n        const openParent = openFence.parentElement;\n        const closeParent = closeFence.parentElement;\n        \n        if (!openParent || !closeParent) continue;\n        \n        // Make fences display: block\n        openFence.style.display = 'block';\n        closeFence.style.display = 'block';\n        \n        // Apply class to parent divs\n        openParent.classList.add('code-block-line');\n        closeParent.classList.add('code-block-line');\n        \n        // Apply class to all divs between the parent divs\n        let currentDiv = openParent.nextElementSibling;\n        while (currentDiv && currentDiv !== closeParent) {\n          // Apply class to divs between the fences\n          if (currentDiv.tagName === 'DIV') {\n            currentDiv.classList.add('code-block-line');\n          }\n          \n          // Move to next sibling\n          currentDiv = currentDiv.nextElementSibling;\n          \n          // Safety check to prevent infinite loop\n          if (!currentDiv) break;\n        }\n      }\n    }\n\n    /**\n     * Get current line number from cursor position\n     * @private\n     */\n    _getCurrentLine(text, cursorPos) {\n      const lines = text.substring(0, cursorPos).split('\\n');\n      return lines.length - 1;\n    }\n\n    /**\n     * Handle input events\n     * @private\n     */\n    handleInput(event) {\n      this.updatePreview();\n    }\n\n    /**\n     * Handle keydown events\n     * @private\n     */\n    handleKeydown(event) {\n      // Let shortcuts manager handle it first\n      const handled = this.shortcuts.handleKeydown(event);\n      \n      // Call user callback if provided\n      if (!handled && this.options.onKeydown) {\n        this.options.onKeydown(event, this);\n      }\n    }\n\n    /**\n     * Handle scroll events\n     * @private\n     */\n    handleScroll(event) {\n      // Sync preview scroll with textarea\n      this.preview.scrollTop = this.textarea.scrollTop;\n      this.preview.scrollLeft = this.textarea.scrollLeft;\n    }\n\n    /**\n     * Get editor content\n     * @returns {string} Current markdown content\n     */\n    getValue() {\n      return this.textarea.value;\n    }\n\n    /**\n     * Set editor content\n     * @param {string} value - Markdown content to set\n     */\n    setValue(value) {\n      this.textarea.value = value;\n      this.updatePreview();\n    }\n\n\n    /**\n     * Focus the editor\n     */\n    focus() {\n      this.textarea.focus();\n    }\n\n    /**\n     * Blur the editor\n     */\n    blur() {\n      this.textarea.blur();\n    }\n\n    /**\n     * Check if editor is initialized\n     * @returns {boolean}\n     */\n    isInitialized() {\n      return this.initialized;\n    }\n\n    /**\n     * Re-initialize with new options\n     * @param {Object} options - New options to apply\n     */\n    reinit(options = {}) {\n      this.options = this._mergeOptions({ ...this.options, ...options });\n      this._applyOptions();\n      this.updatePreview();\n    }\n\n    /**\n     * Update stats bar\n     * @private\n     */\n    _updateStats() {\n      if (!this.statsBar) return;\n      \n      const value = this.textarea.value;\n      const lines = value.split('\\n');\n      const chars = value.length;\n      const words = value.split(/\\s+/).filter(w => w.length > 0).length;\n      \n      // Calculate line and column\n      const selectionStart = this.textarea.selectionStart;\n      const beforeCursor = value.substring(0, selectionStart);\n      const linesBeforeCursor = beforeCursor.split('\\n');\n      const currentLine = linesBeforeCursor.length;\n      const currentColumn = linesBeforeCursor[linesBeforeCursor.length - 1].length + 1;\n      \n      // Use custom formatter if provided\n      if (this.options.statsFormatter) {\n        this.statsBar.innerHTML = this.options.statsFormatter({\n          chars,\n          words,\n          lines: lines.length,\n          line: currentLine,\n          column: currentColumn\n        });\n      } else {\n        // Default format with live dot\n        this.statsBar.innerHTML = `\n          <div class=\"overtype-stat\">\n            <span class=\"live-dot\"></span>\n            <span>${chars} chars, ${words} words, ${lines.length} lines</span>\n          </div>\n          <div class=\"overtype-stat\">Line ${currentLine}, Col ${currentColumn}</div>\n        `;\n      }\n    }\n    \n    /**\n     * Show or hide stats bar\n     * @param {boolean} show - Whether to show stats\n     */\n    showStats(show) {\n      this.options.showStats = show;\n      \n      if (show && !this.statsBar) {\n        // Create stats bar\n        this.statsBar = document.createElement('div');\n        this.statsBar.className = 'overtype-stats';\n        this.wrapper.appendChild(this.statsBar);\n        this.wrapper.classList.add('with-stats');\n        this._updateStats();\n      } else if (!show && this.statsBar) {\n        // Remove stats bar\n        this.statsBar.remove();\n        this.statsBar = null;\n        this.wrapper.classList.remove('with-stats');\n      }\n    }\n\n    /**\n     * Destroy the editor instance\n     */\n    destroy() {\n      // Remove instance reference\n      this.element.overTypeInstance = null;\n      OverType.instances.delete(this.element);\n\n      // Cleanup shortcuts\n      if (this.shortcuts) {\n        this.shortcuts.destroy();\n      }\n\n      // Remove DOM if created by us\n      if (this.wrapper) {\n        const content = this.getValue();\n        this.wrapper.remove();\n        \n        // Restore original content\n        this.element.textContent = content;\n      }\n\n      this.initialized = false;\n    }\n\n    // ===== Static Methods =====\n\n    /**\n     * Initialize multiple editors (static convenience method)\n     * @param {string|Element|NodeList|Array} target - Target element(s)\n     * @param {Object} options - Configuration options\n     * @returns {Array} Array of OverType instances\n     */\n    static init(target, options = {}) {\n      return new OverType(target, options);\n    }\n\n    /**\n     * Get instance from element\n     * @param {Element} element - DOM element\n     * @returns {OverType|null} OverType instance or null\n     */\n    static getInstance(element) {\n      return element.overTypeInstance || OverType.instances.get(element) || null;\n    }\n\n    /**\n     * Destroy all instances\n     */\n    static destroyAll() {\n      const elements = document.querySelectorAll('[data-overtype-instance]');\n      elements.forEach(element => {\n        const instance = OverType.getInstance(element);\n        if (instance) {\n          instance.destroy();\n        }\n      });\n    }\n\n    /**\n     * Inject styles into the document\n     * @param {boolean} force - Force re-injection\n     */\n    static injectStyles(force = false) {\n      if (OverType.stylesInjected && !force) return;\n\n      // Remove any existing OverType styles\n      const existing = document.querySelector('style.overtype-styles');\n      if (existing) {\n        existing.remove();\n      }\n\n      // Generate and inject new styles with current theme\n      const theme = OverType.currentTheme || solar;\n      const styles = generateStyles({ theme });\n      const styleEl = document.createElement('style');\n      styleEl.className = 'overtype-styles';\n      styleEl.textContent = styles;\n      document.head.appendChild(styleEl);\n\n      OverType.stylesInjected = true;\n    }\n    \n    /**\n     * Set global theme for all OverType instances\n     * @param {string|Object} theme - Theme name or custom theme object\n     * @param {Object} customColors - Optional color overrides\n     */\n    static setTheme(theme, customColors = null) {\n      // Process theme\n      let themeObj = typeof theme === 'string' ? getTheme(theme) : theme;\n      \n      // Apply custom colors if provided\n      if (customColors) {\n        themeObj = mergeTheme(themeObj, customColors);\n      }\n      \n      // Store as current theme\n      OverType.currentTheme = themeObj;\n      \n      // Re-inject styles with new theme\n      OverType.injectStyles(true);\n      \n      // Update all existing instances\n      document.querySelectorAll('.overtype-wrapper').forEach(wrapper => {\n        const themeName = typeof themeObj === 'string' ? themeObj : themeObj.name;\n        if (themeName) {\n          wrapper.setAttribute('data-theme', themeName);\n        }\n        \n        // Trigger preview update for the instance\n        const instance = wrapper._instance;\n        if (instance) {\n          instance.updatePreview();\n        }\n      });\n    }\n\n    /**\n     * Initialize global event listeners\n     */\n    static initGlobalListeners() {\n      if (OverType.globalListenersInitialized) return;\n\n      // Input event\n      document.addEventListener('input', (e) => {\n        if (e.target && e.target.classList && e.target.classList.contains('overtype-input')) {\n          const wrapper = e.target.closest('.overtype-wrapper');\n          const instance = wrapper?._instance;\n          if (instance) instance.handleInput(e);\n        }\n      });\n\n      // Keydown event\n      document.addEventListener('keydown', (e) => {\n        if (e.target && e.target.classList && e.target.classList.contains('overtype-input')) {\n          const wrapper = e.target.closest('.overtype-wrapper');\n          const instance = wrapper?._instance;\n          if (instance) instance.handleKeydown(e);\n        }\n      });\n\n      // Scroll event\n      document.addEventListener('scroll', (e) => {\n        if (e.target && e.target.classList && e.target.classList.contains('overtype-input')) {\n          const wrapper = e.target.closest('.overtype-wrapper');\n          const instance = wrapper?._instance;\n          if (instance) instance.handleScroll(e);\n        }\n      }, true);\n\n      // Selection change event\n      document.addEventListener('selectionchange', (e) => {\n        const activeElement = document.activeElement;\n        if (activeElement && activeElement.classList.contains('overtype-input')) {\n          const wrapper = activeElement.closest('.overtype-wrapper');\n          const instance = wrapper?._instance;\n          if (instance) {\n            // Update stats bar for cursor position\n            if (instance.options.showStats && instance.statsBar) {\n              instance._updateStats();\n            }\n            // Debounce updates\n            clearTimeout(instance._selectionTimeout);\n            instance._selectionTimeout = setTimeout(() => {\n              instance.updatePreview();\n            }, 50);\n          }\n        }\n      });\n\n      OverType.globalListenersInitialized = true;\n    }\n}\n\n// Export classes for advanced usage\nOverType.MarkdownParser = MarkdownParser;\nOverType.ShortcutsManager = ShortcutsManager;\n\n// Export theme utilities\nOverType.themes = { solar, cave: getTheme('cave') };\nOverType.getTheme = getTheme;\n\n// Set default theme\nOverType.currentTheme = solar;\n\n// For IIFE builds, esbuild needs the class as the default export\nexport default OverType;\n// Also export as named for ESM compatibility\nexport { OverType };"],
  "mappings": "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AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;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",
  "names": []
}
