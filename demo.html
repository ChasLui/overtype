<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OverType - Interactive Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .hero {
            text-align: center;
            color: white;
            padding: 40px 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .hero h1 {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .hero .tagline {
            font-size: 1.3rem;
            opacity: 0.95;
            margin-bottom: 30px;
        }

        .features {
            display: flex;
            gap: 30px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 40px;
        }

        .feature {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: rgba(255,255,255,0.15);
            border-radius: 25px;
            backdrop-filter: blur(10px);
        }

        .feature-icon {
            font-size: 1.2rem;
        }

        .demo-container {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            padding: 20px;
        }

        @media (max-width: 968px) {
            .demo-container {
                grid-template-columns: 1fr;
            }
            .hero h1 {
                font-size: 2.5rem;
            }
        }

        .demo-section {
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .demo-header {
            padding: 20px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .demo-header h2 {
            font-size: 1.3rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .demo-controls {
            display: flex;
            gap: 8px;
        }

        .btn {
            padding: 6px 12px;
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
            backdrop-filter: blur(10px);
        }

        .btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-1px);
        }

        .editor-wrapper {
            height: 350px;
            position: relative;
        }



        .floating-controls {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
        }

        .fab {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: white;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.5rem;
            border: none;
        }

        .fab:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }

        .fab.primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 30px;
            max-width: 600px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal h3 {
            margin-bottom: 20px;
            color: #333;
        }

        .shortcuts-grid {
            display: grid;
            gap: 10px;
        }

        .shortcut {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .shortcut kbd {
            background: white;
            padding: 2px 6px;
            border: 1px solid #ddd;
            border-radius: 3px;
            font-family: monospace;
            font-size: 0.9rem;
        }

        .theme-selector {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .theme-option {
            flex: 1;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s;
        }

        .theme-option:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .theme-option.active {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .sync-banner {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: #4caf50;
            color: white;
            padding: 10px;
            text-align: center;
            transform: translateY(-100%);
            transition: transform 0.3s;
            z-index: 3000;
        }

        .sync-banner.show {
            transform: translateY(0);
        }

        .github-link {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 10px 20px;
            border-radius: 25px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-decoration: none;
            color: #333;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
            z-index: 100;
        }

        .github-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }
    </style>
</head>
<body>
    <a href="https://github.com/demo/overtype" class="github-link">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
        </svg>
        View on GitHub
    </a>

    <div class="hero">
        <h1>✨ OverType</h1>
        <p class="tagline">A lightweight markdown editor with perfect WYSIWYG alignment</p>
        
        <div style="max-width: 800px; margin: 20px auto; padding: 20px; background: rgba(255,255,255,0.1); border-radius: 10px; backdrop-filter: blur(10px);">
            <h3 style="margin-bottom: 10px; font-size: 1.2rem;">👻 How the Invisible Textarea Overlay Works</h3>
            <p style="line-height: 1.6; opacity: 0.95;">
                The invisible textarea overlay technique uses two perfectly overlapped layers: an invisible textarea on top where you actually type (only the cursor is visible), and a styled preview div below that shows your formatted text. Both layers must use identical monospace fonts and spacing so every character aligns perfectly - like tracing paper that matches exactly. When you type in the invisible textarea, JavaScript instantly updates the preview below with styled HTML, creating the illusion of typing directly into formatted text.
            </p>
        </div>
        
        <div class="features">
            <div class="feature">
                <span class="feature-icon">🎯</span>
                <span>Perfect Alignment</span>
            </div>
            <div class="feature">
                <span class="feature-icon">🎨</span>
                <span>Themeable</span>
            </div>
            <div class="feature">
                <span class="feature-icon">📱</span>
                <span>Mobile Ready</span>
            </div>
            <div class="feature">
                <span class="feature-icon">🚀</span>
                <span>21KB Minified</span>
            </div>
            <div class="feature">
                <span class="feature-icon">🔧</span>
                <span>Zero Dependencies</span>
            </div>
        </div>
    </div>

    <div class="demo-container">
        <div class="demo-section">
            <div class="demo-header">
                <h2>
                    <span>📝</span>
                    Main Editor
                </h2>
                <div class="demo-controls">
                    <button class="btn" onclick="clearEditor('main')">Clear</button>
                </div>
            </div>
            <div id="main-editor" class="editor-wrapper"></div>
        </div>

        <div class="demo-section">
            <div class="demo-header">
                <h2>
                    <span>🎭</span>
                    Preview Editor
                </h2>
                <div class="demo-controls">
                    <button class="btn" onclick="clearEditor('preview')">Clear</button>
                </div>
            </div>
            <div id="preview-editor" class="editor-wrapper"></div>
        </div>

        <div class="demo-section">
            <div class="demo-header">
                <h2>
                    <span>📝</span>
                    Notes
                </h2>
                <div class="demo-controls">
                    <button class="btn" onclick="clearEditor('notes')">Clear</button>
                </div>
            </div>
            <div id="notes-editor" class="editor-wrapper"></div>
        </div>

        <div class="demo-section">
            <div class="demo-header">
                <h2>
                    <span>💻</span>
                    Code Editor
                </h2>
                <div class="demo-controls">
                    <button class="btn" onclick="clearEditor('code')">Clear</button>
                </div>
            </div>
            <div id="code-editor" class="editor-wrapper"></div>
        </div>
    </div>

    <div class="floating-controls">
        <button class="fab" onclick="showShortcuts()" title="Keyboard Shortcuts">⌨️</button>
        <button class="fab primary" onclick="showThemeModal()" title="Theme Settings">🎨</button>
    </div>

    <div id="sync-banner" class="sync-banner">
        ✅ All editors synchronized!
    </div>

    <div id="shortcuts-modal" class="modal">
        <div class="modal-content">
            <h3>⌨️ Keyboard Shortcuts</h3>
            <div class="shortcuts-grid">
                <div class="shortcut">
                    <span>Bold</span>
                    <div><kbd>Cmd/Ctrl</kbd> + <kbd>B</kbd></div>
                </div>
                <div class="shortcut">
                    <span>Italic</span>
                    <div><kbd>Cmd/Ctrl</kbd> + <kbd>I</kbd></div>
                </div>
                <div class="shortcut">
                    <span>Code</span>
                    <div><kbd>Cmd/Ctrl</kbd> + <kbd>K</kbd></div>
                </div>
                <div class="shortcut">
                    <span>Link</span>
                    <div><kbd>Cmd/Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>K</kbd></div>
                </div>
                <div class="shortcut">
                    <span>Numbered List</span>
                    <div><kbd>Cmd/Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>7</kbd></div>
                </div>
                <div class="shortcut">
                    <span>Bullet List</span>
                    <div><kbd>Cmd/Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>8</kbd></div>
                </div>
            </div>
            <br>
            <button class="btn" style="background: #667eea; color: white; width: 100%; padding: 12px;" onclick="closeModal('shortcuts-modal')">Close</button>
        </div>
    </div>

    <div id="theme-modal" class="modal">
        <div class="modal-content">
            <h3>🎨 Theme Settings</h3>
            <p style="margin-bottom: 15px; color: #666;">Choose a theme for all editors</p>
            <div class="theme-selector">
                <div class="theme-option" onclick="applyGlobalTheme('solar')">
                    <div style="font-size: 2rem; margin-bottom: 10px;">☀️</div>
                    <strong>Solar</strong>
                    <p style="font-size: 0.85rem; color: #666; margin-top: 5px;">Light & warm</p>
                </div>
                <div class="theme-option" onclick="applyGlobalTheme('cave')">
                    <div style="font-size: 2rem; margin-bottom: 10px;">🌙</div>
                    <strong>Cave</strong>
                    <p style="font-size: 0.85rem; color: #666; margin-top: 5px;">Dark & cool</p>
                </div>
            </div>
            <br>
            <button class="btn" style="background: #667eea; color: white; width: 100%; padding: 12px;" onclick="closeModal('theme-modal')">Close</button>
        </div>
    </div>

    <script src="dist/overtype.js"></script>
    <script>
        // Store editor instances
        const editors = {};
        
        // Sample content for each editor
        const sampleContent = {
            main: `# Welcome to OverType! 

This is a **powerful** yet *lightweight* markdown editor.

## Features at a Glance

- 🎯 Perfect character alignment
- 👻 Invisible textarea overlay  
- 🎨 Beautiful themes
- ⌨️ Keyboard shortcuts
- 📱 Mobile optimized

## Try It Out

Start typing below or try the keyboard shortcuts!

> Pro tip: Press **Cmd/Ctrl + B** for bold text

\`\`\`javascript
// Code blocks work too!
const editor = new OverType('#editor');
\`\`\``,

            preview: `# Live Preview Demo

Watch as your **markdown** transforms in real-time!

## Shopping List
- [ ] Milk
- [ ] Bread  
- [ ] Coffee ☕
- [ ] Chocolate 🍫

## Links
Check out [GitHub](https://github.com) for more!

---

*Type anything and see it styled instantly!*`,

            notes: `# Quick Notes 📝

## Meeting Agenda
1. Project status update
2. **Budget review**
3. *Timeline discussion*
4. Next steps

## Action Items
- Complete documentation
- Review pull requests
- Deploy to staging

> Remember: Ship early, ship often!`,

            code: `# Code Snippets

## JavaScript Example
\`\`\`javascript
class OverType {
  constructor(target, options) {
    this.init(target, options);
  }
  
  getValue() {
    return this.textarea.value;
  }
}
\`\`\`

## CSS Styling
\`\`\`css
.editor {
  font-family: monospace;
  line-height: 1.6;
}
\`\`\`

## Usage
\`npm install overtype\``
        };

        // Initialize all editors
        function initEditors() {
            // Handle both direct class and module.default scenarios
            const OT = window.OverType.default || window.OverType;
            
            // Set global theme
            OT.setTheme('solar');
            
            // Main editor
            [editors.main] = new OT('#main-editor', {
                value: sampleContent.main,
                showStats: true
            });

            // Preview editor
            [editors.preview] = new OT('#preview-editor', {
                value: sampleContent.preview,
                showStats: true
            });

            // Notes editor
            [editors.notes] = new OT('#notes-editor', {
                value: sampleContent.notes,
                showStats: true
            });

            // Code editor
            [editors.code] = new OT('#code-editor', {
                value: sampleContent.code,
                fontSize: '13px',
                showStats: true
            });

        }

        // Toggle theme globally
        function toggleTheme() {
            const OT = window.OverType.default || window.OverType;
            const currentTheme = OT.currentTheme?.name || 'solar';
            const newTheme = currentTheme === 'solar' ? 'cave' : 'solar';
            OT.setTheme(newTheme);
        }

        // Clear specific editor
        function clearEditor(editorKey) {
            editors[editorKey].setValue('');
        }

        // Sync all editors with main editor content
        function syncAllEditors() {
            const mainContent = editors.main.getValue();
            Object.keys(editors).forEach(key => {
                if (key !== 'main') {
                    editors[key].setValue(mainContent);
                }
            });
            
            // Show sync banner
            const banner = document.getElementById('sync-banner');
            banner.classList.add('show');
            setTimeout(() => {
                banner.classList.remove('show');
            }, 2000);
        }

        // Apply theme globally
        function applyGlobalTheme(theme) {
            const OT = window.OverType.default || window.OverType;
            OT.setTheme(theme);
            
            // Update theme modal UI
            document.querySelectorAll('.theme-option').forEach(opt => {
                opt.classList.remove('active');
            });
            event.target.closest('.theme-option').classList.add('active');
        }

        // Modal functions
        function showShortcuts() {
            document.getElementById('shortcuts-modal').classList.add('active');
        }

        function showThemeModal() {
            document.getElementById('theme-modal').classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Close modals on background click
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.classList.remove('active');
                }
            });
        });

        // Initialize on load
        window.addEventListener('DOMContentLoaded', () => {
            initEditors();
        });

        // Keyboard shortcut for sync (Cmd/Ctrl + Shift + S)
        document.addEventListener('keydown', (e) => {
            if ((e.metaKey || e.ctrlKey) && e.shiftKey && e.key === 'S') {
                e.preventDefault();
                syncAllEditors();
            }
        });
    </script>
</body>
</html>